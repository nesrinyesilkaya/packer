/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.3/userguide/java_library_plugin.html
 */

// Apply the java-library plugin to add support for Java Library

plugins {
  id 'java'
  id 'maven-publish'
  id 'jacoco'
}

group 'com.ny'
version '1.0-SNAPSHOT'

sourceCompatibility = JavaVersion.VERSION_1_8

repositories {
  mavenCentral()
}

publishing {
  publications {
    maven(MavenPublication) {
      artifactId = 'implementation'
      from components.java
    }
  }
}


jar {
  manifest { 
    attributes 'Main-Class': 'com.ny.Application'
  }  

  from {
    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
  }
}

jacoco {
    toolVersion = "0.8.5"
    reportsDir = file("$buildDir/jacoco")
}


jacocoTestReport {
    dependsOn test
}

test {
    useTestNG() {
        suites "src/test/resources/testng.xml"
    }
    finalizedBy jacocoTestReport
}


dependencies {
    compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.30' 
   
    testCompile(group: 'org.testng', name: 'testng', version: '6.14.3')
    testCompile(group: 'org.mockito', name: 'mockito-all', version: '1.10.19')
    
}





